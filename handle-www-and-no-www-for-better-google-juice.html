<!DOCTYPE html>
<html lang="en">
        <head>
                        <meta charset="utf-8" />
                        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
                        <meta name="generator" content="Pelican" />
                        <title>"Handle www. and no-www for better google juice"</title>
                        <link rel="stylesheet" href="http://lizard-spock.co.uk/pelican_test/theme/css/main.css" />
                                <link href="http://lizard-spock.co.uk/pelican_test/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Pelican Trial Atom Feed" />
    <meta name="description" content="Bundler Performance Programming Rack Ruby Sinatra Web discuss_url: //163 url: //163/Handle_www._and_no-www_for_better_google_juice id: 163 There..." />
        </head>

        <body id="index" class="home">
                <header id="banner" class="body">
                        <h1><a href="http://lizard-spock.co.uk/pelican_test/">Pelican Trial</a></h1>
                        <nav><ul>
                                                <li><a href="http://lizard-spock.co.uk/pelican_test/category/outdoors.html">Outdoors</a></li>
                                                <li><a href="http://lizard-spock.co.uk/pelican_test/category/perforce.html">Perforce</a></li>
                                                <li class="active"><a href="http://lizard-spock.co.uk/pelican_test/category/posts.html">posts</a></li>
                                                <li><a href="http://lizard-spock.co.uk/pelican_test/category/python.html">Python</a></li>
                        </ul></nav>
                </header><!-- /#banner -->
  <section id="content" class="body">
    <article>
      <header>
        <h1 class="entry-title">
          <a href="http://lizard-spock.co.uk/pelican_test/handle-www-and-no-www-for-better-google-juice.html" rel="bookmark"
             title="Permalink to "Handle www. and no-www for better google juice"">"Handle www. and no-www for better google juice"</a></h1>
      </header>

      <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2012-05-18T23:00:39+01:00">
                Published: Fri 18 May 2012
        </abbr>

                <address class="vcard author">
                        By                                 <a class="url fn" href="http://lizard-spock.co.uk/pelican_test/author/morganp.html">morganp</a>
                </address>
        <p>In <a href="http://lizard-spock.co.uk/pelican_test/category/posts.html">posts</a>.</p>
        
</footer><!-- /.post-info -->        <ul>
<li>Bundler</li>
<li>Performance</li>
<li>Programming</li>
<li>Rack</li>
<li>Ruby</li>
<li>Sinatra</li>
<li>Web
discuss_url: //163
url: //163/Handle_www._and_no-www_for_better_google_juice
id: 163</li>
</ul>
<hr>
<p>There was an interesting post on hacker news recently, <a href="http://blog.safeshepherd.com/post/23218902229/google-just-nerfed-us-a-venture-backed-startup">safeshepherd suddenly fell off the google</a> for their own name. The <a href="http://news.ycombinator.com/item?id=3987935">comments</a> had some good answers especially the first by a google employee. </p>
<p>The gist of it is that if you have https:// and http:// and www.domain.com and domain.com google sees 4 versions of you site. It will pick one of them as the main site each time it ranks your site. This can change every, effecting the ranking, as it looks like duplicated content.</p>
<p>For Sinatra there is a nice bit of middle were called <a href="https://github.com/logicaltext/rack-no-www">rack-no-www</a> which adds the redirect for you.</p>
<p>Add to you gem file</p>
<div class="highlight"><pre><span></span><code>gem  &quot;rack-no-www&quot;,  &quot;~&gt; 0.0.2&quot;, :require =&gt; &#39;rack/no-www&#39;
</code></pre></div>

<p>Or just <code>gem install rack-no-www</code></p>
<p>Usage in a basic Sinatra App (app.rb)</p>
<div class="highlight"><pre><span></span><code><span class="nv">require</span><span class="w"> </span><span class="s1">&#39;sinatra&#39;</span>
<span class="nv">require</span><span class="w"> </span><span class="s1">&#39;rack/no-www&#39;</span>

<span class="nv">use</span><span class="w"> </span><span class="nv">Rack</span>::<span class="nv">NoWWW</span>

<span class="nv">get</span><span class="w"> </span><span class="s1">&#39;/&#39;</span><span class="w"> </span><span class="k">do</span>
<span class="w">  </span><span class="s1">&#39;Helloworld&#39;</span>
<span class="k">end</span>
</code></pre></div>

<p>Run with <code>ruby app.rb</code> With web browser view localhost:4567. If that is working then you should find www.localhost:4567 redirects back to localhost:4567</p>
      </div><!-- /.entry-content -->

    </article>
  </section>
                <section id="extras" class="body">
                                <div class="social">
                                        <h2>social</h2>
                                        <ul>
                                                        <li><a href="http://lizard-spock.co.uk/pelican_test/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                                        </ul>
                                </div><!-- /.social -->
                </section><!-- /#extras -->

                <footer id="contentinfo" class="body">
                        <address id="about" class="vcard body">
                                Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
                        </address><!-- /#about -->

                        <p>The theme is by <a rel="nofollow" href="https://www.smashingmagazine.com/2009/08/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
                </footer><!-- /#contentinfo -->

        </body>
</html>